{"ast":null,"code":"export default {\n  name: \"GoodsDetail\",\n  data() {\n    return {\n      id: this.$route.query.id,\n      goods: {},\n      current: '商品详情',\n      form: {},\n      fromVisible1: false,\n      addressList: []\n    };\n  },\n  created() {\n    // 先更新浏览数\n    this.$request.put('/goods/updateReadCount/' + this.id).then(res => {\n      this.load();\n    });\n    this.loadAddress();\n  },\n  methods: {\n    addOrdes() {\n      this.form.id = this.id;\n      this.$request.post('/orders/add').then(res => {\n        console.log('Response:', res);\n        if (res.code === '200') {\n          console.log('add Data:', res.data); // 这将显示data属性的实际内容\n          this.$message.success(\"下单成功\");\n          this.$request.get('/front/Orders');\n        } else {\n          // 处理错误或数据不存在的情况\n          console.error('No  found');\n        }\n      }).catch(error => {\n        // 处理请求错误\n        console.error('Request failed', error);\n      });\n    },\n    loadAddress() {\n      this.$request.get('/address/selectAll').then(res => {\n        console.log('Response:', res);\n        if (res && res.data) {\n          console.log('Address Data:', res.data); // 这将显示data属性的实际内容\n          this.addressList = res.data;\n        } else {\n          // 处理错误或数据不存在的情况\n          console.error('No address data found');\n        }\n      }).catch(error => {\n        // 处理请求错误\n        console.error('Request failed', error);\n      });\n    },\n    handleBuy() {\n      this.form = {};\n      this.fromVisible1 = true;\n    },\n    addLikes() {\n      this.$request.post('/likes/add', {\n        fid: this.goods.id,\n        module: 'goods'\n      }).then(res => {\n        if (res.code === '200') {\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    addCollect() {\n      this.$request.post('/collect/add', {\n        fid: this.goods.id,\n        module: 'goods'\n      }).then(res => {\n        if (res.code === '200') {\n          this.load();\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    changeItem(current) {\n      this.current = current;\n    },\n    load() {\n      this.$request.get('/goods/selectById/' + this.id).then(res => {\n        this.goods = res.data || {};\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","id","$route","query","goods","current","form","fromVisible1","addressList","created","$request","put","then","res","load","loadAddress","methods","addOrdes","post","console","log","code","$message","success","get","error","catch","handleBuy","addLikes","fid","module","msg","addCollect","changeItem"],"sources":["src/views/front/GoodsDetail.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin: 0 auto; padding: 10px 0; width: 50%\">\r\n    <div style=\"display: flex; grid-gap: 20px; margin-bottom: 40px\">\r\n      <img :src=\"goods.img\" alt=\"\" style=\"width: 50%; height: 400px; display: block\">\r\n      <div>\r\n        <div style=\"font-weight: bold; font-size: 26px; margin: 20px 0\">{{ goods.name }}</div>\r\n        <div style=\"color: #666; font-size: 16px;\">\r\n          <span>浏览 {{ goods.readCount }}</span>\r\n          <span style=\"margin-left: 20px\">点赞 {{ goods.likesCount }}</span>\r\n          <span style=\"margin-left: 20px\">收藏 {{ goods.collectCount }}</span>\r\n        </div>\r\n        <div style=\"color: red; font-size: 24px; margin: 40px 0\">￥{{ goods.price }}</div>\r\n        <div style=\"margin-bottom: 20px\"><span style=\"color: #666\">发货地：</span> {{ goods.address }}</div>\r\n        <div style=\"margin-bottom: 20px\"><span style=\"color: #666\">卖家：</span> {{ goods.userName }}</div>\r\n        <div style=\"margin-bottom: 40px\"><span style=\"color: #666\">发布日期：</span> {{ goods.date }}</div>\r\n        <div>\r\n          <el-button v-if=\"!goods.userLikes\" @click=\"addLikes\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">点赞</el-button>\r\n          <el-button v-if=\"goods.userLikes\" @click=\"addLikes\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">已点赞</el-button>\r\n          <el-button v-if=\"!goods.userCollect\" @click=\"addCollect\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">收藏</el-button>\r\n          <el-button v-if=\"goods.userCollect\" @click=\"addCollect\" size=\"medium\" style=\"background-color: orangered; color: #eee; border-color: orangered\">已收藏</el-button>\r\n          <el-button size=\"medium\" type=\"danger\" @click=\"handleBuy\">立即购买</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div>\r\n      <div style=\"display: flex; border-bottom: 1px solid orangered; margin-bottom: 10px\">\r\n        <div style=\"padding: 10px 20px; cursor: pointer\" :class=\"{ 'active' : current === '商品详情' }\" @click=\"changeItem('商品详情')\">商品详情</div>\r\n        <div style=\"padding: 10px 20px; cursor: pointer\" :class=\"{ 'active' : current === '商品评论' }\" @click=\"changeItem('商品评论')\">商品评论</div>\r\n      </div>\r\n\r\n      <div v-if=\"current === '商品详情'\">\r\n        <div v-html=\"goods.content\"></div>\r\n      </div>\r\n\r\n      <div v-if=\"current === '商品评论'\">\r\n\r\n      </div>\r\n      <el-dialog title=\"选择收货地址\" :visible.sync=\"fromVisible1\" width=\"30%\" :close-on-click-modal=\"false\" destroy-on-close>\r\n        <div style=\"padding: 0 20px\">\r\n          <el-radio-group v-model=\"form.addressId\">\r\n            <el-radio v-for=\"item in addressList\" :key=\"item.id\" :label=\"item.id\" style=\"margin-bottom: 10px\">\r\n              {{ item.name + ' ' + item.address + ' ' + item.phone }}\r\n            </el-radio>\r\n          </el-radio-group>\r\n        </div>\r\n      </el-dialog>\r\n\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"GoodsDetail\",\r\n  data() {\r\n    return {\r\n      id: this.$route.query.id,\r\n      goods: {},\r\n      current: '商品详情',\r\n      form: {},\r\n      fromVisible1: false,\r\n      addressList: [],\r\n\r\n\r\n    }\r\n  },\r\n  created() {\r\n    // 先更新浏览数\r\n    this.$request.put('/goods/updateReadCount/' + this.id).then(res => {\r\n      this.load()\r\n    })\r\n\r\n    this.loadAddress()\r\n  },\r\n  methods: {\r\n\r\n    addOrdes(){\r\n\r\n      this.form.id=this.id\r\n      this.$request.post('/orders/add').then(res => {\r\n        console.log('Response:', res);\r\n        if (res.code==='200' ) {\r\n          console.log('add Data:', res.data); // 这将显示data属性的实际内容\r\n          this.$message.success(\"下单成功\")\r\n          this.$request.get('/front/Orders')\r\n        } else {\r\n          // 处理错误或数据不存在的情况\r\n          console.error('No  found');\r\n        }\r\n      }).catch(error => {\r\n        // 处理请求错误\r\n        console.error('Request failed', error);\r\n      });\r\n    },\r\n    \r\n    loadAddress() {\r\n      this.$request.get('/address/selectAll').then(res => {\r\n        console.log('Response:', res);\r\n        if (res && res.data) {\r\n          console.log('Address Data:', res.data); // 这将显示data属性的实际内容\r\n          this.addressList = res.data;\r\n        } else {\r\n          // 处理错误或数据不存在的情况\r\n          console.error('No address data found');\r\n        }\r\n      }).catch(error => {\r\n        // 处理请求错误\r\n        console.error('Request failed', error);\r\n      });\r\n    },\r\n    handleBuy(){\r\n      this.form={}\r\n      this.fromVisible1=true\r\n\r\n    },\r\n    addLikes() {\r\n      this.$request.post('/likes/add', {fid: this.goods.id, module: 'goods'}).then(res => {\r\n        if (res.code === '200') {\r\n\r\n          this.load()\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n\r\n\r\n      })\r\n    },\r\n    addCollect(){\r\n      this.$request.post('/collect/add',{fid: this.goods.id,module: 'goods'}).then(res=>{\r\n        if(res.code==='200'){\r\n\r\n          this.load()\r\n        }else{\r\n          this.$message.error(res.msg)\r\n        }\r\n\r\n\r\n      })\r\n\r\n    },\r\n    changeItem(current) {\r\n      this.current = current\r\n    },\r\n    load() {\r\n      this.$request.get('/goods/selectById/' + this.id).then(res => {\r\n        this.goods = res.data || {}\r\n      })\r\n    }\r\n\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.active {\r\n  background-color: orangered;\r\n  color: #eee;\r\n}\r\n</style>"],"mappings":"AAsDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,EAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;MACAG,KAAA;MACAC,OAAA;MACAC,IAAA;MACAC,YAAA;MACAC,WAAA;IAGA;EACA;EACAC,QAAA;IACA;IACA,KAAAC,QAAA,CAAAC,GAAA,kCAAAV,EAAA,EAAAW,IAAA,CAAAC,GAAA;MACA,KAAAC,IAAA;IACA;IAEA,KAAAC,WAAA;EACA;EACAC,OAAA;IAEAC,SAAA;MAEA,KAAAX,IAAA,CAAAL,EAAA,QAAAA,EAAA;MACA,KAAAS,QAAA,CAAAQ,IAAA,gBAAAN,IAAA,CAAAC,GAAA;QACAM,OAAA,CAAAC,GAAA,cAAAP,GAAA;QACA,IAAAA,GAAA,CAAAQ,IAAA;UACAF,OAAA,CAAAC,GAAA,cAAAP,GAAA,CAAAb,IAAA;UACA,KAAAsB,QAAA,CAAAC,OAAA;UACA,KAAAb,QAAA,CAAAc,GAAA;QACA;UACA;UACAL,OAAA,CAAAM,KAAA;QACA;MACA,GAAAC,KAAA,CAAAD,KAAA;QACA;QACAN,OAAA,CAAAM,KAAA,mBAAAA,KAAA;MACA;IACA;IAEAV,YAAA;MACA,KAAAL,QAAA,CAAAc,GAAA,uBAAAZ,IAAA,CAAAC,GAAA;QACAM,OAAA,CAAAC,GAAA,cAAAP,GAAA;QACA,IAAAA,GAAA,IAAAA,GAAA,CAAAb,IAAA;UACAmB,OAAA,CAAAC,GAAA,kBAAAP,GAAA,CAAAb,IAAA;UACA,KAAAQ,WAAA,GAAAK,GAAA,CAAAb,IAAA;QACA;UACA;UACAmB,OAAA,CAAAM,KAAA;QACA;MACA,GAAAC,KAAA,CAAAD,KAAA;QACA;QACAN,OAAA,CAAAM,KAAA,mBAAAA,KAAA;MACA;IACA;IACAE,UAAA;MACA,KAAArB,IAAA;MACA,KAAAC,YAAA;IAEA;IACAqB,SAAA;MACA,KAAAlB,QAAA,CAAAQ,IAAA;QAAAW,GAAA,OAAAzB,KAAA,CAAAH,EAAA;QAAA6B,MAAA;MAAA,GAAAlB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAQ,IAAA;UAEA,KAAAP,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAG,KAAA,CAAAZ,GAAA,CAAAkB,GAAA;QACA;MAGA;IACA;IACAC,WAAA;MACA,KAAAtB,QAAA,CAAAQ,IAAA;QAAAW,GAAA,OAAAzB,KAAA,CAAAH,EAAA;QAAA6B,MAAA;MAAA,GAAAlB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAQ,IAAA;UAEA,KAAAP,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAG,KAAA,CAAAZ,GAAA,CAAAkB,GAAA;QACA;MAGA;IAEA;IACAE,WAAA5B,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;IACA;IACAS,KAAA;MACA,KAAAJ,QAAA,CAAAc,GAAA,6BAAAvB,EAAA,EAAAW,IAAA,CAAAC,GAAA;QACA,KAAAT,KAAA,GAAAS,GAAA,CAAAb,IAAA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}